local player = game.Players.LocalPlayer

-- Key assignments for each player
local keyAssignments = {
    ["leedeo26"] = "XhsDjwm3Xans",
    ["Roblox"] = "2g6zH1IXMOvr",
    ["c4rlen"] = "W60o76Mhwbp4"
}

local playerName = player.Name
local isWhitelisted = false

-- Check if player is whitelisted
for _, name in ipairs(whitelistedPlayers) do
    if name == playerName then
        isWhitelisted = true
        break
    end
end

if isWhitelisted then
    -- Get the provided key from the global table
    local providedKey = _G["Deo's ScriptHUB"]["Key"]
    
    -- Check if the player's key matches the assigned key
    if keyAssignments[playerName] then
        if keyAssignments[playerName] == providedKey then
            print("Access granted. Welcome, " .. playerName .. "!")
            
            -- Special condition for leedeo26 (Owner)
            if playerName == "leedeo26" and providedKey == "XhsDjwm3Xans" then
                print("Owner access granted!")
                loadstring(game:HttpGet("https://raw.githubusercontent.com/DeoSCRIPTS/ScriptHUB/refs/heads/main/OwnerScript"))()
            else
                -- Load regular scripts for other players
                loadstring(game:HttpGet("https://raw.githubusercontent.com/DeoSCRIPTS/ScriptHUB/refs/heads/main/Not%20Detected%20Game"))()
                
                -- Load game-specific scripts
                if game.PlaceId == 10449761463 then
                    loadstring(game:HttpGet("https://raw.githubusercontent.com/DeoSCRIPTS/ScriptHUB/refs/heads/main/TSB"))()
                elseif game.PlaceId == 2753915549 or game.PlaceId == 4442272183 or game.PlaceId == 7449423635 then
                    loadstring(game:HttpGet("https://raw.githubusercontent.com/DeoSCRIPTS/ScriptHUB/refs/heads/main/Blox%20Fruits"))()
                else
                    print("Game Not Detected, Using INF Yield Instead")
                end
            end
        else
            player:Kick("Invalid key.")
        end
    else
        player:Kick("No key assigned for your username.")
    end
else
    player:Kick("You are not whitelisted.")
end
